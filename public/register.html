<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Register</title>
    <style>
      *, *::before, *::after { box-sizing: border-box; }
      :root { color-scheme: dark; }
      html, body { height: 100%; background: #000; }
      body { margin: 0; display: grid; place-items: center; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color: #fff; }
      .card { width: min(440px, 92vw); background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.15); border-radius: 14px; padding: 18px; box-shadow: 0 8px 24px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.06); }
      h1 { margin: 0 0 12px 0; font-size: 20px; font-weight: 600; }
      label { display: block; font-size: 14px; margin: 12px 0 6px; opacity: 0.85; }
      input { width: 100%; padding: 12px 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.06); color: #fff; outline: none; font-size: 16px; }
      input::placeholder { color: rgba(255,255,255,0.6); }
      .error { color: #ff5252; margin-top: 8px; min-height: 1em; }
      .ok { color: #7CFC7C; margin-top: 8px; min-height: 1em; }
      button { width: 100%; margin-top: 14px; padding: 12px 16px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.15); color: #fff; background: #0a84ff; font-weight: 600; box-shadow: 0 6px 16px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.12); }
      .hint { font-size: 12px; opacity: 0.8; margin-top: 10px; }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>Create your account</h1>
      <form id="f">
        <label for="email">Email</label>
        <input id="email" name="email" type="email" placeholder="you@example.com" required />
        <label for="display">Display name</label>
        <input id="display" name="display" type="text" placeholder="Your name (optional)" />
        <label for="phone">Phone (optional)</label>
        <input id="phone" name="phone" type="tel" placeholder="+1 555 123 4567" />

        <label for="password">Password</label>
        <input id="password" name="password" type="password" autocomplete="new-password" placeholder="At least 8 characters" required />
        <div class="error" id="err"></div>
        <div class="ok" id="ok"></div>
        <button type="submit">Register</button>
        <div class="hint">Weâ€™ll add email and phone verification later to limit spam and bots. For now, no verification is required.</div>
      </form>
    </div>
    <script>
      const f = document.getElementById('f');
      const err = document.getElementById('err');
      const ok = document.getElementById('ok');
      f.addEventListener('submit', async (e) => {
        e.preventDefault(); err.textContent = ''; ok.textContent='';
        const email = f.email.value.trim();
        const password = f.password.value;
        const displayName = f.display.value.trim();
        const phone = f.phone.value.trim();
        try {
          const res = await fetch('/api/register', { method:'POST', headers:{ 'content-type':'application/json' }, body: JSON.stringify({ email, password, displayName, phone }) });
          const data = await res.json().catch(()=>({}));
          if (!res.ok) { err.textContent = data && data.error ? data.error : 'Registration failed'; return; }
          try { localStorage.setItem('auth','1'); } catch {}
          ok.textContent = 'Registered! You can close this and continue.';
          setTimeout(()=>{ window.location.href = '/' }, 800);
        } catch (e) {
          err.textContent = 'Network error';
        }
      });
    </script>
  </body>
  </html>
